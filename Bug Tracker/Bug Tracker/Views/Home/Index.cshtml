@model IEnumerable<Bug_Tracker.Models.Project>

@{
    ViewBag.Title = "Dashboard";
}

<h2>Dashboard</h2>

<p>
    @Html.ActionLink("Create Project", "Create", "Projects")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Body)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Created)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Updated)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Body)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Created)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Updated)
            </td>
            <td>
                @*@Html.ActionLink(linkText: "Edit", actionName: "Edit", controllerName: "Projects", routeValues: new { id = item.Id }, htmlAttributes: "")*@
                @Html.ActionLink(linkText: "New Ticket", actionName: "Create", controllerName: "Tickets", routeValues: new { id = item.Id }, htmlAttributes: "") |
                @Html.ActionLink(linkText: "Assign", actionName: "Assign", controllerName: "Projects", routeValues: new { id = item.Id }, htmlAttributes: "") |
                @Html.ActionLink(linkText: "Edit", actionName: "Edit", controllerName: "Projects", routeValues: new { id = item.Id }, htmlAttributes: "") |
                @Html.ActionLink(linkText: "Details", actionName: "Details", controllerName: "Projects", routeValues: new { id = item.Id }, htmlAttributes: "") |
                @Html.ActionLink(linkText: "Delete", actionName: "Delete", controllerName: "Projects", routeValues: new { id = item.Id }, htmlAttributes: "")
            </td>
        </tr>
    }

</table>

<table class="table">
    <tr>
        <th>
            Ticket
        </th>
        <th>
            Project
        </th>
        <th>
            Created by
        </th>
        <th>
            Assigned to
        </th>
        <th>
            Type
        </th>
        <th>
            Priority
        </th>
        <th>
            Status
        </th>
        <th>
            Description
        </th>
        <th>
            Created
        </th>
        <th>
            Updated
        </th>
        <th></th>
    </tr>

    @if (Model != null)
    {
        foreach (var item in Model)
        {
            foreach (var ticket in item.Tickets)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Title)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Project.Title)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.AuthorUser.FirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.AssignedToUser.FirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Type.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Priority.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Status.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Body)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Created)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => ticket.Updated)
                    </td>
                    <td>
                        @Html.ActionLink(linkText: "Edit", actionName: "Edit", controllerName: "Tickets", routeValues: new { id = ticket.Id }, htmlAttributes: "") |
                        @Html.ActionLink(linkText: "Details", actionName: "Details", controllerName: "Tickets", routeValues: new { id = ticket.Id }, htmlAttributes: "") |
                        @Html.ActionLink(linkText: "Delete", actionName: "Delete", controllerName: "Tickets", routeValues: new { id = ticket.Id }, htmlAttributes: "")
                    </td>
                </tr>
            }
        }
    }
</table>

